<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Compare balance graphically of a continuous covariate as part of a PSA — box.psa • PSAgraphics</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Compare balance graphically of a continuous covariate as part of a PSA — box.psa"><meta property="og:description" content="Given predefined strata and two level treatment for a continuous covariate
from a propensity score analysis, box.psa draws pairs of side by side
boxplots corresponding to control and treatment for each stratum."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PSAgraphics</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/jbryer/PSAgraphics/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compare balance graphically of a continuous covariate as part of a PSA</h1>
    <small class="dont-index">Source: <a href="https://github.com/jbryer/PSAgraphics/blob/HEAD/R/box.psa.R" class="external-link"><code>R/box.psa.R</code></a></small>
    <div class="hidden name"><code>box.psa.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Given predefined strata and two level treatment for a continuous covariate
from a propensity score analysis, <code>box.psa</code> draws pairs of side by side
boxplots corresponding to control and treatment for each stratum.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">box.psa</span><span class="op">(</span></span>
<span>  <span class="va">continuous</span>,</span>
<span>  treatment <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  strata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  boxwex <span class="op">=</span> <span class="fl">0.17</span>,</span>
<span>  offset <span class="op">=</span> <span class="fl">0.17</span>,</span>
<span>  col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"yellow"</span>, <span class="st">"orange"</span>, <span class="st">"black"</span>, <span class="st">"red"</span>, <span class="st">"darkorange3"</span><span class="op">)</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Stratum"</span>,</span>
<span>  legend.xy <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  legend.labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pts <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  balance <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  trim <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  B <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>continuous</dt>
<dd><p>Vector or N X 3 dataframe or matrix. If a vector, then
represents the quantitative covariate that is being balanced within strata
in a PSA. If <code>continuous</code> has three columns, then the second and third
are assumed to be the <code>treatment</code> and <code>strata</code> respectively.
Missing values are not allowed.</p></dd>


<dt>treatment</dt>
<dd><p>Binary vector of same length as <code>continuous</code>
representing the two treatments; can be a character vector or factor.</p></dd>


<dt>strata</dt>
<dd><p>A vector or factor of same length as <code>continuous</code>
indicating the derived strata from estimated propensity scores. May be
numeric or character vector, or factor. Strata are ordered lexicographically
in plot.</p></dd>


<dt>boxwex</dt>
<dd><p>Numeric; controls width of boxes. Default = 0.17</p></dd>


<dt>offset</dt>
<dd><p>Numeric; controls distance between the two boxes in each
stratum. Default = 0.17</p></dd>


<dt>col</dt>
<dd><p>Default = <code>c("yellow", "orange", "black", "red",
"darkorange3")</code>. Color vector for the control boxes, treatment boxes, and
line connecting their means.</p></dd>


<dt>xlab</dt>
<dd><p>Label for the x-axis; default = <code>"Stratum"</code>.  Other
standard labels may be used as well.</p></dd>


<dt>legend.xy</dt>
<dd><p>Binary vector giving coordinates of the legend. By default
the legend is placed to the top left.</p></dd>


<dt>legend.labels</dt>
<dd><p>Vector of labels for the legend; default is essentially
<code>c("Treatment (first)", "Treatment (second)", "Treatment Means
Compared", "KS p-values", "Strata-Treatment Size")</code> where treatment names
are taken from <code>treatment</code>.  Vector has four elements if <code>balance
= FALSE</code>, ommitting "KS p-values".</p></dd>


<dt>pts</dt>
<dd><p>Logical; if <code>TRUE</code> then (jittered) points are added on top
of the boxplots.</p></dd>


<dt>balance</dt>
<dd><p>Logical; if <code>TRUE</code> then <code>bal.ms.psa</code> provides a
histogram of a permutation distribution and reference statstic to assess
balance across strata; <code>bal.ks.psa</code> adds p-values to the graph derived
from 2-sample Kologmorov-Smirnov tests of equivalence of control/treatment
distributions within each stratum.</p></dd>


<dt>trim</dt>
<dd><p>If <code>balance=TRUE</code>, defines fraction (0 to 0.5) of
observations to be trimmed from each end of stratum-treatment level before
the mean is computed. See <code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></code>, <code><a href="bal.ms.psa.html">bal.ms.psa</a></code>.</p></dd>


<dt>B</dt>
<dd><p>Passed to <code>bal.ms.psa</code> if necessary, determines number of
randomly generated comparison statistics.  Default =1000.</p></dd>


<dt>...</dt>
<dd><p>Other graphical parameters passed to <code>boxplot</code>.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>Draws a pair of side by side boxplots for each stratum of a propensity score
analysis.  This allows visual comparisons within strata of the distribution
of the given continuous covariate, and comparisons between strata as well.
The number of observations in each boxplot are given below each box, and the
means of paired treatment and control groups are connected.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code>bal.ks.psa</code>, <code>bal.ms.psa</code>, <code>cat.psa</code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>James E. Helmreich <a href="mailto:James.Helmreich@Marist.edu">James.Helmreich@Marist.edu</a></p>
<p>Robert M. Pruzek <a href="mailto:RMPruzek@yahoo.com">RMPruzek@yahoo.com</a></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">continuous</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">treatment</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>,<span class="fl">1000</span>,replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">strata</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">1000</span>,replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">box.psa</span><span class="op">(</span><span class="va">continuous</span>, <span class="va">treatment</span>, <span class="va">strata</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NAs introduced by coercion</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NAs introduced by coercion</span>
<span class="r-plt img"><img src="box.psa-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">lindner</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/attach.html" class="external-link">attach</a></span><span class="op">(</span><span class="va">lindner</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lindner.ps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">abcix</span> <span class="op">~</span> <span class="va">stent</span> <span class="op">+</span> <span class="va">height</span> <span class="op">+</span> <span class="va">female</span> <span class="op">+</span></span></span>
<span class="r-in"><span>      <span class="va">diabetic</span> <span class="op">+</span> <span class="va">acutemi</span> <span class="op">+</span> <span class="va">ejecfrac</span> <span class="op">+</span> <span class="va">ves1proc</span>,</span></span>
<span class="r-in"><span>      data <span class="op">=</span> <span class="va">lindner</span>, family <span class="op">=</span> <span class="va">binomial</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ps</span><span class="op">&lt;-</span><span class="va">lindner.ps</span><span class="op">$</span><span class="va">fitted</span></span></span>
<span class="r-in"><span><span class="va">lindner.s5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span><span class="va">ps</span>, <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">ps</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      include.lowest <span class="op">=</span> <span class="cn">TRUE</span>, labels <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">box.psa</span><span class="op">(</span><span class="va">ejecfrac</span>, <span class="va">abcix</span>, <span class="va">lindner.s5</span>, xlab <span class="op">=</span> <span class="st">"ejecfrac"</span>,</span></span>
<span class="r-in"><span>      legend.xy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3.5</span>,<span class="fl">110</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NAs introduced by coercion</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NAs introduced by coercion</span>
<span class="r-plt img"><img src="box.psa-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lindner.s10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span><span class="va">ps</span>, <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">ps</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      include.lowest <span class="op">=</span> <span class="cn">TRUE</span>, labels <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">box.psa</span><span class="op">(</span><span class="va">height</span>, <span class="va">abcix</span>, <span class="va">lindner.s10</span>, xlab<span class="op">=</span><span class="st">"height"</span>,</span></span>
<span class="r-in"><span>      boxwex <span class="op">=</span> <span class="fl">.15</span>, offset <span class="op">=</span> <span class="fl">.15</span>, legend.xy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">130</span><span class="op">)</span>, balance <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="box.psa-3.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Press &lt;enter&gt; for bar chart...</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NAs introduced by coercion</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NAs introduced by coercion</span>
<span class="r-plt img"><img src="box.psa-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by James Helmreich, Robert Pruzek, Jason Bryer.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

